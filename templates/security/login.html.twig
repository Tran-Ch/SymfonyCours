{% extends 'base.html.twig' %}

{% block title %}Compte utilisateur{% endblock %}

{% block body %}

<div style="max-width: 900px; margin: 3rem auto; padding: 1rem; display: flex; flex-wrap: wrap; gap: 2rem; justify-content: center;">

    {# ----------- COLONNE 1 : FORMULAIRE DE CONNEXION ----------- #}
    <div style="flex: 1 1 380px; background: rgba(208, 208, 163, 1); padding: 2rem; border-radius: 12px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
        <h2 style="margin-bottom: 1rem; text-align:center;">Connexion</h2>

        {% if error %}
            <div class="alert alert-danger" style="margin-bottom: 1rem;">
                {{ error.messageKey|trans(error.messageData, 'security') }}
            </div>
        {% endif %}

        {% if app.user %}
            <div class="alert alert-info" style="margin-bottom: 1rem;">
                Vous êtes connecté en tant que <strong>{{ app.user.userIdentifier }}</strong>.
                <a href="{{ path('app_logout') }}">Se déconnecter</a>
            </div>
        {% endif %}

        <form method="post">
            <label for="email" style="font-weight:bold;">Adresse e-mail</label>
            <input
                type="email"
                id="email"
                name="email"
                value="{{ last_username }}"
                class="form-control"
                required
                autocomplete="email"
                style="margin-bottom: 1rem;"
            >

            <label for="password" style="font-weight:bold;">Mot de passe</label>
            <input
                type="password"
                id="password"
                name="password"
                class="form-control"
                required
                autocomplete="current-password"
                style="margin-bottom: 1rem;"
            >

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

            <button type="submit"
                    style="width:100%; padding:0.75rem; background:#4f6f52; color:white;
                           border:none; border-radius:10px; font-size:1.1rem; cursor:pointer;">
                Se connecter
            </button>
        </form>
    </div>


    {# ----------- COLONNE 2 : CRÉATION DE COMPTE ----------- #}
    <div style="flex: 1 1 380px; background:rgba(208, 208, 163, 1); padding: 2rem; border-radius: 12px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
        <h2 style="margin-bottom: 1rem; text-align:center;">Nouveau sur notre site ?</h2>

        <p style="margin-bottom: 1.5rem; line-height: 1.6;">
            Créez un compte gratuitement pour :
        </p>

        <ul style="margin-bottom: 1.5rem; line-height: 1.7;">
            <li>Commenter les destinations</li>
            <li>Aimer vos spots préférés</li>
            <li>Enregistrer vos expériences</li>
            <li>Participer à notre communauté</li>
        </ul>

        <div style="text-align:center;">
            <a href="{{ path('app_register') }}"
               style="display:inline-block; padding:0.8rem 1.5rem; background:#4b7c5c; 
                      color:white; text-decoration:none; border-radius:999px; font-size:1.1rem;">
                Créer un compte
            </a>
        </div>
    </div>

</div>

{% endblock %}
